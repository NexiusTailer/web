---
title: 端口转发
sidebar_label: 端口转发
description: 服务器端口转发配置教程。
---

**欢迎来到端口转发教程！**

您正在阅读的是由 Leopard 制作的端口转发教程。

您需要准备一个 samp-server 或 omp-server 以及路由器。若您没有路由器，则无需进行端口转发！

## 准备工作

首先需要找到您的**网关地址**。假设您使用 Vista 系统：点击开始菜单，在搜索栏输入**cmd**，打开黑色命令提示符窗口。输入**ipconfig**命令，等待信息加载完成后，在输出内容中查找标有**_gateway_**的条目（请保持窗口开启）。

找到网关地址后，打开浏览器。在地址栏输入查找到的**_gateway_**数值（例如：192.168.0.1/192.168.1.1），按回车键进入。

## 路由器配置

恭喜进入路由器管理界面！接下来需要进行端口转发设置。

在管理界面中找到包含以下任一名称的功能模块：

- 虚拟服务器
- 端口转发
- 端口控制
- 应用共享
- 任何包含`端口`字样的选项

找到对应模块后，点击"新增"、"新建端口"等类似按钮来创建新端口规则。

按以下参数进行配置：

```
Port: 您的端口号（默认：7777）
Port Type: UDP
Enabled: 启用
**IP: 请继续第三步操作**
```

现在需要获取本机 IP 地址。

## 获取 IP 地址并继续配置

返回命令提示符窗口，在输出信息中查找*IPv4*地址（格式如：**192.168.0.100**）。复制该地址并返回路由器设置界面。例如我的 IP 是 192.168.0.100

```
Port: 您的端口号（默认：7777）
Port Type: UDP
Enabled: 启用
IP: 192.168.0.100
```

点击**保存**。注意！请同时配置**Windows 防火墙**：

通过开始菜单搜索"防火墙"，打开"Windows 防火墙"设置。点击"更改设置"，在弹出的新窗口中选择"例外"标签页，点击"添加端口"，按以下参数配置：

```
名称: SA-MP服务器（可自定义）
端口号: 您的端口号（默认：7777）
协议: UDP
```

确认保存后启动服务器。在 SA-MP 客户端输入：localhost:端口号（默认 7777）。若显示有效延迟，则说明服务器运行正常。最后访问：

[我的 IP 地址查询网](https://www.whatismyip.com)。

## 最终测试

在网站上获取公网 IP 地址，将其添加到 SA-MP 客户端的收藏列表并附加端口号（默认 7777）。若连接成功，

**恭喜您！** _您已完成端口转发配置_！
